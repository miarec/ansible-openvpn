
##############################################
# OpenVPN 2.0 Server config file             #
# Community Edition                          #
#                                            #
# Generated by Ansible                       #
# https://github.com/miarec/ansible-openvpn  #
##############################################

# Service Configuration.
user nobody
group nobody

# Authentication Configuration
plugin /usr/share/openvpn/plugin/lib/openvpn-auth-pam.so login

# Connection Configuration
port {{ openvpn_vpn_port }}
proto {{ openvpn_vpn_protocol }}
dev tun
dh none
cipher AES-256-GCM
auth SHA256
keepalive {{ keepalive_interval }} {{ keepalive_timeout }}
max-clients {{ max_clients }}
persist-key
persist-tun
explicit-exit-notify 0

# Certificate Configuration
ca {{ openvpn_ca_crt_name }}
cert {{ openvpn_server_crt_name }}
key {{ openvpn_server_key_name }}
tls-crypt {{ openvpn_ta_key_name }}

# Routing Configuration
topology subnet
server {{ client_subnet }}
{% for route in client_routes %}
push "route {{ route }}"
{% endfor %}

# Logging configuration
ifconfig-pool-persist {{ openvpn_log_ipp }}
status {{ openvpn_log_status }}
log-append {{ openvpn_log }}
verb {{ openvpn_log_verb }}


